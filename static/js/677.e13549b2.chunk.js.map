{"version":3,"file":"static/js/677.e13549b2.chunk.js","mappings":"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","sources":["pages/CatalogPage/CatalogPage.styled.jsx","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nexport const WrapperSelect = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  padding-left: 128px;\n  padding-right: 128px;\n`;\n\nexport const Wrapper = styled.ul`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 50px 29px;\n  padding-left: 128px;\n  padding-right: 128px;\n  margin-top: 50px;\n  margin-bottom: 50px;\n`;\n\nexport const WrapperButton = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-bottom: 50px;\n`;\n\nexport const Button = styled.button`\n  border: none;\n  background-color: transparent;\n`;\n\nexport const TextButtun = styled.span`\n  color: #3470ff;\n  font-family: Manrope;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 24px; /* 150% */\n  text-decoration-line: underline;\n`;\n","import { useEffect, useState } from 'react';\n\nimport CardItem from 'components/CardItem/CardItem';\nimport SelectForm from 'components/Select/Select';\nimport {\n  useGetAdvertsQuery,\n  useGetCarsByPageQuery,\n} from '../../redux/operations';\nimport { Loader } from 'components/Loader/Loader';\n\nimport {\n  Wrapper,\n  WrapperSelect,\n  WrapperButton,\n  Button,\n  TextButtun,\n} from './CatalogPage.styled';\n\nfunction CatalogPage() {\n  const [page, setPage] = useState(1);\n  const [catalog, setCatalog] = useState([]);\n  const { data, error, isLoading } = useGetCarsByPageQuery(page);\n  const { data: allAdverts } = useGetAdvertsQuery();\n\n  const [filters, setFilters] = useState({\n    make: '',\n    filteredPrices: [],\n    minMileage: '',\n    maxMileage: '',\n  });\n  const [filteredAdverts, setFilteredAdverts] = useState(null);\n  const [isFiltering, setIsFiltering] = useState(false);\n\n  const loadMore = () => {\n    setPage(page + 1);\n  };\n\n  useEffect(() => {\n    if (data) {\n      setCatalog(prevCatalog => [...prevCatalog, ...data]);\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (isFiltering) {\n      if (\n        filters.make ||\n        filters.filteredPrices.length > 0 ||\n        filters.minMileage ||\n        filters.maxMileage\n      ) {\n        const filteredAdverts = allAdverts.filter(advert => {\n          if (filters.make && advert.make !== filters.make.value) {\n            return false;\n          }\n          if (\n            filters.filteredPrices.length > 0 &&\n            !filters.filteredPrices.some(\n              priceObj => priceObj.value === advert.rentalPrice.replace('$', '')\n            )\n          ) {\n            return false;\n          }\n          if (filters.minMileage && advert.mileage < filters.minMileage) {\n            return false;\n          }\n          if (filters.maxMileage && advert.mileage > filters.maxMileage) {\n            return false;\n          }\n          return true;\n        });\n\n        setFilteredAdverts(filteredAdverts);\n      } else {\n        setFilteredAdverts(catalog);\n        setIsFiltering(false);\n      }\n    }\n  }, [filters, allAdverts, isFiltering, catalog]);\n\n  const makes = allAdverts\n    ? [...new Set(allAdverts.map(advert => advert.make))]\n    : [];\n  const prices = allAdverts\n    ? [\n        ...new Set(\n          allAdverts.map(advert => advert.rentalPrice.replace('$', ''))\n        ),\n      ]\n    : [];\n  const mileage = allAdverts\n    ? [...new Set(allAdverts.map(advert => advert.mileage))]\n    : [];\n  const minMileage = Math.min(...mileage);\n  const maxMileage = Math.max(...mileage);\n\n  return (\n    <>\n      <WrapperSelect>\n        <SelectForm\n          makes={makes}\n          prices={prices}\n          minMileage={minMileage}\n          maxMileage={maxMileage}\n          onFilterChange={newFilters => {\n            setFilters(newFilters);\n            setIsFiltering(true);\n          }}\n          filters={filters}\n        />\n      </WrapperSelect>\n      <Wrapper>\n        {isFiltering ? (\n          filteredAdverts !== null && filteredAdverts.length > 0 ? (\n            filteredAdverts.map((car, index) => (\n              <CardItem key={index} data={car} />\n            ))\n          ) : (\n            <div>No results found for the selected criteria.</div>\n          )\n        ) : error ? (\n          <>Oops, there was an error...</>\n        ) : isLoading ? (\n          <Loader />\n        ) : catalog.length > 0 ? (\n          catalog.map((car, index) => <CardItem key={index} data={car} />)\n        ) : null}\n      </Wrapper>\n      <WrapperButton>\n        {!isFiltering && data?.length >= 8 && (\n          <Button type=\"button\" onClick={loadMore}>\n            <TextButtun>Load more</TextButtun>\n          </Button>\n        )}\n      </WrapperButton>\n    </>\n  );\n}\n\nexport default CatalogPage;\n"],"names":["WrapperSelect","styled","div","_templateObject","_taggedTemplateLiteral","Wrapper","ul","_templateObject2","WrapperButton","_templateObject3","Button","button","_templateObject4","TextButtun","span","_templateObject5","page","setPage","useState","catalog","setCatalog","data","error","isLoading","useGetCarsByPageQuery","allAdverts","useGetAdvertsQuery","filters","setFilters","make","filteredPrices","minMileage","maxMileage","filteredAdverts","setFilteredAdverts","isFiltering","setIsFiltering","useEffect","prevCatalog","length","filter","advert","value","some","priceObj","rentalPrice","replace","mileage","makes","Set","map","prices","Math","min","max","_jsxs","_Fragment","children","_jsx","SelectForm","onFilterChange","newFilters","car","index","CardItem","Loader","type","onClick","loadMore"],"sourceRoot":""}